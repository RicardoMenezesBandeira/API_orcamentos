<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ficha de Cadastro</title>
  <link rel="stylesheet" href="../static/css/geradorOrcamento.css">
  <script src="../static/js/geradorOrcamento.js" defer></script>

</head>
<body>
  <header>
    
  </header>
  <div class="form-container">
    <div class="menu">
      <div class="clientes-sugeridos">
      <ul id="sugestoes" style="border: 1px solid #ccc; display: none;"></ul> 
      </div>
    
    <h2>Adicionar Orçamento</h2>
    <div>
    <button class="back-button" onclick="back()">Voltar</button>
    <button class='back-button' onclick='cadastra_cliente()'>Cadastrar Cliente</button>
    </div>
  </div>
  
    <form class="form-grid" id="form-grid">

      <!-- Dados Gerais -->
      <div class="section-title">Dados Gerais</div>
      <div class="form-group"><label>Número:</label><input type="number" name="numero" id="numero"></div>
      <div class="form-group"><label>Cliente:</label><input type="text" name="cliente" id="cliente"></div>
      <div class="form-group"><label>CNPJ do Cliente:</label><input type="text" name="cnpj" id="cnpj"></div>
      <div class="form-group"><label>Responsável:</label><input type="text" name="responsavel"></div>
      <div class="form-group"><label>Endereço:</label><input type="text" name="endereco"></div>
      <div class="form-group"><label>Cidade:</label><input type="text" name="cidade"></div>
      <div class="form-group">
        <label for="data">Data:</label>
        <input
          type="text"
          id="data"
          name="data"
          placeholder="DD/MM/AAAA"
          pattern="\d{2}/\d{2}/\d{4}"
        >
      </div>
      <div class="form-group"><label>Telefone:</label><input type="text" id="telefone" name="telefone"></div>
      <div class="form-group"><label>E-mail:</label><input type="email" name="email"></div>
      <div class="form-group"><label>Nome Fantasia:</label><input type="text" name="nome"></div>
      <div class="form-group"><label>CEP:</label><input type="text" name="cep"></div>
      

 


      <!-- Produtos -->
      <div class="section-title">Produtos</div>
      <div id="produtos-container">
        <div class="produto form-group-set">
          <div class="flex-row">
            <div class="form-group"><label>Número do item:</label><input type="number" name="numero[]" value="1" readonly></div>
            <div class="form-group"><label>Produto:</label><textarea name="produto[]" required rows="1" oninput="autoGrow(this)"></textarea></div>
          </div>
          <div class="flex-row">
            <div class="form-group"><label>Quantidade:</label><input type="text" name="qtd[]" step="0.0001"  onkeydown="return blockDotComma(event)">
</div>
            <div class="form-group"><label>Unidade:</label><input type="text" name="un[]"></div>
          </div>
          <div class="flex-row">
            <div class="form-group"><label>Valor Unitário (R$):</label><input type="text" step="0.0001" name="valor_unitario[]"></div>
            <div class="form-group"><label>Valor Total (R$):</label><input type="text" step="0.0001" name="total_local[]"></div>
          </div>
          <button type="button" class="remove-btn" onclick="this.parentNode.remove()">×</button>
        </div>
      </div>
      <button type="button" id="add-produto">+ Adicionar Produto</button>

      <!-- Resumo -->
      <!-- Resumo -->
<div id="resumo" class="section-title">
  <div class="flex-row">
    <div class="form-group">
      <label>Total de itens:</label>
      <input type="number" id="total-itens" name="total_itens" readonly value="0">
    </div>
    <div class="form-group">
      <label>Valor total (R$):</label>
      <input type="text" step="0.0001" id="valor-total" name="valor_total" readonly value="0.0001">
    </div>
  </div>
</div>

      <!-- Condições Comerciais -->
      <div class="section-title">Condições </div>
      <div class="form-group"><label>Observações:</label><textarea  name="obs"  rows="1" oninput="autoGrow(this)"></textarea></div>

      <!-- Condições Gerais -->
      <div class="section-title">Condições Gerais</div>
      <div class="form-group"><label>Previsão de entrega (dias):</label><textarea name="dias_entrega" rows="1" oninput="autoGrow(this)"></textarea></div>
      <div class="form-group"><label>Validade da proposta (dias):</label><input type="number" name="dias_validade"></div>
      <div class="form-group"><label>Prazo de pagamento (dias):</label><input type="number" name="dias_pagamento"></div>

      <!-- Templates -->
      <div class="section-title">Templates</div>
      <div class="form-group">
        <label><input type="checkbox" name="templates[]" value="BossBR"> BossBR</label>
        <label><input type="checkbox" name="templates[]" value="Construcom"> Construcom</label>
    
        <label><input type="checkbox" name="templates[]" value="PCasallas"> PCasallas</label>
        <label><input type="checkbox" name="templates[]" value="Big"> Big</label>
      </div>

      <!-- Ações -->
      <div class="form-actions">
        <button type="submit">Enviar</button>
      </div>
    </form>
  </div>

</body>
<script>
  function blockDotComma(e) {
  const key = e.key;

  // Bloqueia "." e "," e "e" (exponencial)
  if (key === "." || key === "e" || key === "E") {
    e.preventDefault();
    return false;
  }

  return true;
}
</script>
</html>

